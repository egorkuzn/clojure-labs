(ns lab-3.lab32-test
  (:require [clojure.test :refer :all]
            [lab-3.lab32 :refer :all]
            [lab-3.core-test :refer :all]))

(deftest test-parallel-filter
  (testing "test parallel filter"
    (println "test parallel filter")
    (println (lab-32 heavy-even? (range 100) (/ 100 8)))
    (println (lab-32 heavy-even? (range 100) (/ 100 8)))
    (println (lab-32 heavy-even? (range 100) (/ 100 8)))
    (time (println (lab-32 heavy-even? (range 0 100) (/ 100 8))))
    (println "1")
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 1)) (doall)))
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 1)) (doall)))
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 1)) (doall)))
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 1)) (doall)))
    (println "2")
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 2)) (doall)))
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 2)) (doall)))
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 2)) (doall)))
    (time (->> (lab-32 heavy-even? (range 1000) (/ 1000 2)) (doall)))
    (println "4")
    (time (lab-32 heavy-even? (range 1000) (/ 1000 4)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 4)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 4)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 4)))
    (println "8")
    (time (lab-32 heavy-even? (range 1000) (/ 1000 8)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 8)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 8)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 8)))
    (println "14")
    (time (lab-32 heavy-even? (range 1000) (/ 1000 14)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 14)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 14)))
    (time (lab-32 heavy-even? (range 1000) (/ 1000 14)))
    (println "non-parallel filter")
    (time (->> (filter heavy-even? (range 1000)) (doall)))
    (time (->> (filter heavy-even? (range 1000)) (doall)))
    (time (->> (filter heavy-even? (range 1000)) (doall)))
    (time (->> (filter heavy-even? (range 1000)) (doall)))))
